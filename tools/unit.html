<!doctype html>
<html lang="en" data-theme="light">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Unit Pro â€” ToolNest</title>
    <meta name="description" content="Professional Unit Converter. Length, Weight, Currency, and more." />
    <meta name="theme-color" content="#0ea5e9">

    <link rel="icon" href="../favicon.ico" sizes="any">
    <link rel="icon" type="image/png" sizes="16x16" href="../icons/icon-16.png?v=2">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>

    <style>
        :root {
            --bg-light: #f1f5f9;
            --bg-dark: #0f172a;
            --glass-light: rgba(255, 255, 255, 0.95);
            --glass-dark: rgba(15, 23, 42, 0.8);
        }

        html.dark {
            --bg-light: #020617;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: var(--bg-light);
            color: #0f172a;
            transition: background-color 0.4s ease, color 0.4s ease;
        }

        html.dark body {
            color: #f8fafc;
        }

        .glass {
            background: var(--glass-light);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(203, 213, 225, 1);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        html.dark .glass {
            background: var(--glass-dark);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="sticky top-0 z-40 glass border-b border-white/20 dark:border-white/5">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <a href="../index.html" class="flex items-center gap-3 group">
                <div
                    class="w-10 h-10 rounded-xl bg-gradient-to-br from-sky-500 to-indigo-500 flex items-center justify-center text-white shadow-lg shadow-sky-500/20 group-hover:scale-105 transition">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                </div>
                <h1 class="text-xl font-bold tracking-tight">Back to Home</h1>
            </a>

            <button id="themeToggle"
                class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition text-gray-600 dark:text-gray-400">
                <svg id="themeIcon" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </div>
    </header>

    <main class="flex-grow flex items-center justify-center p-4">
        <div class="w-full max-w-4xl grid lg:grid-cols-3 gap-8">

            <!-- Converter -->
            <div class="lg:col-span-2 glass rounded-3xl p-8">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-3xl font-extrabold">Unit Pro</h2>
                    <div class="flex gap-2">
                        <button onclick="copyResult()"
                            class="p-2 rounded-lg bg-gray-100 dark:bg-slate-800 hover:bg-sky-100 dark:hover:bg-sky-900/30 text-sky-600 transition"
                            title="Copy Result">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="flex overflow-x-auto pb-4 mb-6 gap-2 no-scrollbar">
                    <button onclick="setCategory('length')"
                        class="cat-btn active px-4 py-2 rounded-xl text-sm font-bold bg-sky-600 text-white shadow-md transition"
                        data-cat="length">Length</button>
                    <button onclick="setCategory('weight')"
                        class="cat-btn px-4 py-2 rounded-xl text-sm font-bold bg-gray-100 dark:bg-slate-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-700 transition"
                        data-cat="weight">Weight</button>
                    <button onclick="setCategory('temp')"
                        class="cat-btn px-4 py-2 rounded-xl text-sm font-bold bg-gray-100 dark:bg-slate-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-700 transition"
                        data-cat="temp">Temp</button>
                    <button onclick="setCategory('currency')"
                        class="cat-btn px-4 py-2 rounded-xl text-sm font-bold bg-gray-100 dark:bg-slate-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-700 transition"
                        data-cat="currency">Currency</button>
                </div>

                <!-- Inputs -->
                <div class="grid grid-cols-[1fr,auto,1fr] gap-4 items-center">
                    <div class="space-y-2">
                        <label
                            class="text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400">From</label>
                        <input type="number" id="inputVal" value="1"
                            class="w-full p-4 rounded-xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-gray-700 text-xl font-bold focus:ring-2 focus:ring-sky-500 outline-none transition"
                            oninput="convert()">
                        <select id="fromUnit"
                            class="w-full p-3 rounded-xl bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-gray-700 text-sm font-medium"
                            onchange="convert()"></select>
                    </div>

                    <button onclick="swapUnits()"
                        class="p-3 rounded-full bg-gray-100 dark:bg-slate-800 hover:bg-sky-100 dark:hover:bg-sky-900/30 text-gray-600 dark:text-gray-300 hover:text-sky-600 dark:hover:text-sky-400 transition mt-6">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                        </svg>
                    </button>

                    <div class="space-y-2">
                        <label
                            class="text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400">To</label>
                        <input type="text" id="outputVal" readonly
                            class="w-full p-4 rounded-xl bg-gray-100 dark:bg-slate-900/50 border border-gray-200 dark:border-gray-700 text-xl font-bold text-gray-500 dark:text-gray-400 cursor-not-allowed">
                        <select id="toUnit"
                            class="w-full p-3 rounded-xl bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-gray-700 text-sm font-medium"
                            onchange="convert()"></select>
                    </div>
                </div>

                <div id="currencyInfo" class="hidden mt-4 text-xs text-gray-400 text-center">
                    Rates updated daily via Frankfurter API.
                </div>

            </div>

            <!-- History -->
            <div class="glass rounded-3xl p-6 flex flex-col h-full">
                <h3 class="text-lg font-bold mb-4">History</h3>
                <div id="historyList"
                    class="flex-grow space-y-3 overflow-y-auto max-h-[300px] text-sm text-gray-600 dark:text-gray-400">
                    <p class="text-center italic opacity-50 mt-10">No recent conversions</p>
                </div>
                <button onclick="clearHistory()"
                    class="mt-4 w-full py-2 rounded-xl text-xs font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition">Clear
                    History</button>
            </div>

        </div>
    </main>

    <script>
        // Theme Logic
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;

        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark');
        } else {
            html.classList.remove('dark');
        }

        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
        });

        // Converter Logic
        const units = {
            length: { m: 1, km: 1000, cm: 0.01, mm: 0.001, ft: 0.3048, in: 0.0254, yd: 0.9144, mi: 1609.34 },
            weight: { kg: 1, g: 0.001, mg: 0.000001, lb: 0.453592, oz: 0.0283495 },
            temp: ['C', 'F', 'K'],
            currency: {} // Will be populated
        };

        const unitNames = {
            m: 'Meters', km: 'Kilometers', cm: 'Centimeters', mm: 'Millimeters', ft: 'Feet', in: 'Inches', yd: 'Yards', mi: 'Miles',
            kg: 'Kilograms', g: 'Grams', mg: 'Milligrams', lb: 'Pounds', oz: 'Ounces',
            C: 'Celsius', F: 'Fahrenheit', K: 'Kelvin',
            USD: 'US Dollar', EUR: 'Euro', GBP: 'British Pound', INR: 'Indian Rupee', JPY: 'Japanese Yen', AUD: 'Australian Dollar', CAD: 'Canadian Dollar'
        };

        let currentCategory = 'length';
        let currencyRates = {};

        async function fetchRates() {
            try {
                const res = await fetch('https://api.frankfurter.app/latest?from=USD');
                const data = await res.json();
                currencyRates = data.rates;
                currencyRates['USD'] = 1; // Base

                // Populate units object
                units.currency = currencyRates;

                // If currently on currency tab, refresh
                if (currentCategory === 'currency') populateSelects();
            } catch (e) {
                console.error('Failed to fetch rates', e);
                // Fallback rates
                units.currency = { USD: 1, EUR: 0.92, GBP: 0.79, INR: 83.5, JPY: 150.0 };
            }
        }

        fetchRates();

        function setCategory(cat) {
            currentCategory = cat;

            document.querySelectorAll('.cat-btn').forEach(btn => {
                if (btn.dataset.cat === cat) {
                    btn.classList.add('bg-sky-600', 'text-white');
                    btn.classList.remove('bg-gray-100', 'dark:bg-slate-800', 'text-gray-600', 'dark:text-gray-300');
                } else {
                    btn.classList.remove('bg-sky-600', 'text-white');
                    btn.classList.add('bg-gray-100', 'dark:bg-slate-800', 'text-gray-600', 'dark:text-gray-300');
                }
            });

            document.getElementById('currencyInfo').classList.toggle('hidden', cat !== 'currency');

            populateSelects();
            convert();
        }

        function populateSelects() {
            const fromSel = document.getElementById('fromUnit');
            const toSel = document.getElementById('toUnit');
            fromSel.innerHTML = '';
            toSel.innerHTML = '';

            const keys = currentCategory === 'temp' ? units.temp : Object.keys(units[currentCategory]);

            keys.forEach(key => {
                const name = unitNames[key] || key;
                fromSel.add(new Option(name, key));
                toSel.add(new Option(name, key));
            });

            if (keys.length > 1) toSel.selectedIndex = 1;
        }

        function convert() {
            const val = parseFloat(document.getElementById('inputVal').value);
            const from = document.getElementById('fromUnit').value;
            const to = document.getElementById('toUnit').value;
            const out = document.getElementById('outputVal');

            if (isNaN(val)) {
                out.value = '';
                return;
            }

            let result;

            if (currentCategory === 'temp') {
                if (from === to) result = val;
                else if (from === 'C') result = to === 'F' ? (val * 9 / 5) + 32 : val + 273.15;
                else if (from === 'F') result = to === 'C' ? (val - 32) * 5 / 9 : (val - 32) * 5 / 9 + 273.15;
                else if (from === 'K') result = to === 'C' ? val - 273.15 : (val - 273.15) * 9 / 5 + 32;
            } else if (currentCategory === 'currency') {
                // Base is USD
                const inUSD = val / units.currency[from];
                result = inUSD * units.currency[to];
            } else {
                const base = val * units[currentCategory][from];
                result = base / units[currentCategory][to];
            }

            out.value = parseFloat(result.toFixed(4));
            addToHistory(val, from, out.value, to);
        }

        function swapUnits() {
            const from = document.getElementById('fromUnit');
            const to = document.getElementById('toUnit');
            const temp = from.value;
            from.value = to.value;
            to.value = temp;
            convert();
        }

        function copyResult() {
            const out = document.getElementById('outputVal');
            if (out.value) {
                navigator.clipboard.writeText(out.value);
                // Visual feedback could be added here
            }
        }

        // History
        let history = [];
        function addToHistory(val, from, res, to) {
            const entry = `${val} ${from} = ${res} ${to}`;
            // Avoid duplicates at top
            if (history.length > 0 && history[0] === entry) return;

            history.unshift(entry);
            if (history.length > 10) history.pop();
            renderHistory();
        }

        function renderHistory() {
            const list = document.getElementById('historyList');
            if (history.length === 0) {
                list.innerHTML = '<p class="text-center italic opacity-50 mt-10">No recent conversions</p>';
                return;
            }
            list.innerHTML = history.map(h => `
        <div class="p-3 bg-white dark:bg-slate-800 rounded-xl border border-gray-100 dark:border-gray-700 flex justify-between items-center">
           <span>${h}</span>
        </div>
      `).join('');
        }

        function clearHistory() {
            history = [];
            renderHistory();
        }

        // Init
        populateSelects();
        convert();

    </script>
</body>

</html>