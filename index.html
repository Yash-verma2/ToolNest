<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>ToolNest — Smart Utility Tools for Everyone | Fast, Free & Powerful</title>

  <meta name="google-site-verification" content="oFD9rQUzUexG-79hAg9jhI2Fhaib1xMuBKqDZDmuMIg" />

  <meta name="description"
        content="ToolNest offers powerful AI tools, utilities, generators and interactive features — fast, lightweight, and beautifully designed. Your all-in-one multi-tool hub." />

  <!-- Keywords (optional but helpful) -->
  <meta name="keywords"
        content="ToolNest, online tools, utility hub, free tools, AI tools, generators, utilities, productivity tools, immersive tool hub, wishcraft, studymate, meme maker, pdf tools" />

  <!-- Open Graph (for Facebook, LinkedIn, WhatsApp Preview) -->
  <meta property="og:title" content="ToolNest — Immersive Utility Hub" />
  <meta property="og:description" content="Experience powerful tools in a beautiful, interactive interface." />
  <meta property="og:url" content="https://yourwebsite.com" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://yourwebsite.com/preview.jpg" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="ToolNest — Immersive Utility Hub" />
  <meta name="twitter:description" content="All your top tools in one elegant interface." />
  <meta name="twitter:image" content="https://yourwebsite.com/preview.jpg" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DCHLRV9QKD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-DCHLRV9QKD');
  </script>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#0369a1">
  <!-- iOS Support -->
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta name="apple-mobile-web-app-status-bar" content="#0369a1">

  <style>
    :root{
      --primary: #0369a1;
      --glass: rgba(255,255,255,0.9);
      --muted: #6b7280;
      --bg: #f8fafc;
    }
    html.dark { --primary: #60a5fa; --glass: rgba(10,10,12,0.6); --bg: #0b1220; }

    body{
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color: #0f172a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
      scroll-behavior:smooth;
    }

    /* Glass card */
    .glass {
      background: var(--glass);
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 24px rgba(2,6,23,0.06);
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,0.04);
    }
    html.dark .glass { border-color: rgba(255,255,255,0.04); }

    /* small performance optimizations */
    .tool-card { transition: transform .28s cubic-bezier(.2,.9,.25,1), box-shadow .28s; will-change: transform; }
    @media (max-width: 768px) {
      .tool-card { transform: none !important; box-shadow: none !important; }
      .glass { backdrop-filter: none; } /* mobile performance */
    }

    .scroll-fade-in { opacity: 0; transform: translateY(16px); transition: opacity .55s ease-out, transform .55s ease-out; }
    .scroll-fade-in.is-visible { opacity: 1; transform: translateY(0); }

    /* category dropdown */
    #catDropdown { max-height: 60vh; overflow:auto; }

    /* modal hidden logic handled with classes */
    #categoryModal .modal-content { transform: translateY(-8px); transition: transform .28s ease, opacity .28s ease; opacity: 0; }
    #categoryModal.show { display:flex; }
    #categoryModal.show .modal-content { transform: translateY(0); opacity: 1; }

    /* scroll-to-top */
    #scrollToTopBtn { bottom: 22px; right: 22px; opacity:0; transform:translateY(10px); pointer-events:none; transition:opacity .22s, transform .22s; }
    #scrollToTopBtn.visible { opacity:1; transform:translateY(0); pointer-events:auto; }

    /* accessible focus */
    :focus { outline: 3px solid rgba(3,105,161,0.15); outline-offset: 3px; }

    /* small utilities */
    .pressable:active { transform: translateY(1px) scale(0.998); }
    
    /* Install Button Style */
    #installBtn {
      display: none; /* Hidden by default */
      background-color: #0369a1;
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      transition: background 0.2s;
    }
    #installBtn:hover { background-color: #0284c7; }

    /* Debug Box */
    #debug-status {
      font-family: monospace;
      font-size: 12px;
      margin-top: 40px;
      padding: 20px;
      background: #eee;
      color: #333;
      border-radius: 8px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <!-- Off-canvas mobile menu -->
  <div id="mobileMenu" class="fixed inset-y-0 right-0 z-50 w-64 bg-white transform translate-x-full transition-transform duration-300 md:hidden shadow-2xl glass p-5" aria-hidden="true">
    <div class="flex justify-between items-center mb-6">
      <div class="font-bold">Menu</div>
      <button id="closeMenuBtn" class="p-2 rounded-md text-gray-600" aria-label="Close menu">&times;</button>
    </div>
    <nav class="flex flex-col gap-4 text-lg">
      <a href="#tools" class="mobile-nav-link text-gray-700">Tools</a>
      <a href="#search" class="mobile-nav-link text-gray-700">Search</a>
      <a href="#trust" class="mobile-nav-link text-gray-700">Why Trust Us</a>
      <a href="about.html" class="mobile-nav-link text-gray-700">About</a>
      <!-- Custom Install Button Mobile -->
      <button id="installBtnMobile" class="hidden px-4 py-2 bg-emerald-600 text-white rounded-xl text-center font-bold shadow-md">Install App</button>
      <a href="https://instagram.com/yash_verma_690" class="mt-4 px-4 py-3 bg-sky-600 text-white rounded-xl text-center">Instagram</a>
    </nav>
  </div>

  <!-- Header -->
  <header class="sticky top-0 z-40 glass shadow">
    <div class="max-w-6xl mx-auto p-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-sky-600 to-emerald-400 flex items-center justify-center text-white">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 12h18M12 3v18" stroke="white" stroke-width="2"/></svg>
        </div>
        <div>
          <h1 class="text-lg font-bold">ToolNest</h1>
          <p class="text-xs text-gray-500">The immersive utility hub</p>
        </div>
      </div>

      <nav class="hidden md:flex gap-6 items-center text-sm font-medium">
        <a href="#tools" class="text-gray-600 hover:text-sky-700 transition">Tools</a>
        <a href="#trust" class="text-gray-600 hover:text-sky-700 transition">Trust</a>
        <a href="about.html" class="text-gray-600 hover:text-sky-700 transition">About</a>
        
        <!-- Desktop Install Button -->
        <button id="installBtn" class="hidden">Install App</button>

        <button id="themeToggle" class="px-3 py-2 rounded-lg glass" aria-pressed="false" title="Toggle theme">
          <svg id="themeIcon" class="w-5 h-5" viewBox="0 0 24 24" fill="none"><path d="M12 7a5 5 0 100 10 5 5 0 000-10z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>

        <a href="#tools" class="px-4 py-2 bg-sky-600 text-white rounded-xl shadow-sm">Get Started</a>
      </nav>

      <div class="md:hidden flex items-center gap-2">
        <button id="menuBtn" class="p-2 rounded-lg glass" aria-label="Open menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
        </button>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 relative">
    <!-- HERO -->
    <section class="grid md:grid-cols-2 gap-8 items-center py-12 lg:py-20">
      <div>
        <p class="text-sm font-medium text-gray-500 mb-3">Currently featuring <span id="toolCount" class="font-bold text-sky-600">...</span> primary utility tools.</p>
        <span class="text-xs font-bold text-sky-600 uppercase tracking-widest bg-sky-100 px-3 py-1 rounded-full">2025 Utility Redefined</span>
        <h2 class="text-4xl sm:text-5xl font-extrabold mt-4">The <span class="text-sky-600">Immersive</span> Utility Hub.</h2>
        <p class="mt-4 text-gray-600 max-w-xl">Lightweight, private, and visually focused — your all-in-one hub for smart utility tools that work fast on any device.</p>

        <div class="mt-6 flex flex-col sm:flex-row gap-4">
          <a href="#tools" class="pressable px-6 py-3 bg-sky-600 text-white rounded-xl font-semibold shadow-sm text-center">Explore Tools</a>
          <a href="#trust" class="pressable px-6 py-3 border-2 border-gray-200 rounded-xl glass text-center">Why ToolNest?</a>
        </div>
      </div>
      <div class="hidden md:block"></div>
    </section>

    <!-- Trust -->
    <section id="trust" class="py-10 bg-white rounded-2xl my-8 shadow-sm scroll-fade-in">
      <div class="max-w-4xl mx-auto text-center px-6">
        <h3 class="text-2xl md:text-3xl font-extrabold">Built on Speed, Trust, and Impeccable Design.</h3>
        <p class="mt-2 text-gray-600">The professional standard for client-side performance.</p>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mt-8 px-6">
        <div class="text-center p-4 glass rounded-xl">
          <p class="text-4xl font-extrabold text-sky-600">100%</p>
          <p class="text-gray-500 mt-2 text-sm">Data Safety</p>
        </div>
        <div class="text-center p-4 glass rounded-xl">
          <p class="text-4xl font-extrabold text-emerald-600">99.9%</p>
          <p class="text-gray-500 mt-2 text-sm">Load Speed Score</p>
        </div>
        <div class="text-center p-4 glass rounded-xl">
          <p class="text-4xl font-extrabold text-violet-600">100%</p>
          <p class="text-gray-500 mt-2 text-sm">Client-Side Privacy</p>
        </div>
      </div>
    </section>

    <!-- Search -->
    <section id="search" class="py-6 scroll-fade-in">
      <h3 class="text-2xl md:text-3xl font-bold mb-4">Instantly Find Your Tool</h3>
      <div class="relative max-w-3xl">
        <input id="toolSearch" type="text" placeholder="Search by name or function (e.g., 'QR', 'PDF merge')"
               class="w-full p-4 pl-12 glass rounded-2xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-sky-100 transition text-base shadow-inner"
               oninput="filterTools(this.value)" aria-label="Search tools">
        <div class="absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none text-gray-400">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
        </div>
      </div>
    </section>

    <!-- Tools grid + categories -->
    <section id="tools" class="pb-16 scroll-fade-in">
      <div class="flex items-center justify-between mb-4">
        <div class="flex gap-2 items-center">
          <div class="hidden md:flex gap-2">
            <button class="cat-btn active" data-cat="all" onclick="filterCategory('all')">All</button>
            <button class="cat-btn" data-cat="WishCraft" onclick="filterCategory('WishCraft')">Generators</button>
            <button class="cat-btn" data-cat="image" onclick="filterCategory('image')">Image</button>
            <button class="cat-btn" data-cat="pdf" onclick="filterCategory('pdf')">PDF</button>
          </div>
          <div class="md:hidden">
            <button id="catDropdownBtn" class="w-full glass border px-4 py-3 rounded-xl flex justify-between items-center text-sm">Categories
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
            </button>
            <div id="catDropdown" class="hidden absolute mt-2 w-[94%] z-20 left-3 glass rounded-xl border border-gray-200 p-2">
              <button class="block w-full text-left px-4 py-3" data-category="all">All</button>
              <button class="block w-full text-left px-4 py-3" data-category="WishCraft">Generators</button>
              <button class="block w-full text-left px-4 py-3" data-category="image">Image Tools</button>
              <button class="block w-full text-left px-4 py-3" data-category="pdf">PDF Tools</button>
              <button class="block w-full text-left px-4 py-3" data-category="fun">Fun Tools</button>
            </div>
          </div>
        </div>
        <div>
          <button id="openCategoriesDesktop" class="px-4 py-2 rounded-lg bg-yellow-400 text-white">Open Categories</button>
        </div>
      </div>

      <!-- category modal (desktop) -->
      <div id="categoryModal" class="fixed inset-0 bg-black/40 z-50 hidden items-center justify-center p-6">
        <div class="modal-content bg-white dark:bg-gray-900 w-[720px] max-h-[80vh] rounded-2xl p-6 overflow-y-auto glass">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-2xl font-extrabold text-yellow-500">All Categories</h2>
            <button id="closeCategoryModal" class="text-gray-600 text-3xl">&times;</button>
          </div>
          <div id="allCategoriesList" class="grid grid-cols-2 md:grid-cols-3 gap-4">
            <!-- dynamic buttons will fill here -->
          </div>
        </div>
      </div>

      <!-- Tools Grid -->
      <div id="toolsGrid" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-4">
        
        <!-- WishCraft -->
        <a href="https://wishcraft-yash.onrender.com" 
           class="tool-card glass p-5 rounded-2xl border border-gray-200 group hover:shadow-lg transition-all relative overflow-hidden"
           data-search="WishCraft wish craft AI generator birthday anniversary invitation card generator celebration page AI"
           data-category="WishCraft" aria-label="WishCraft - AI Celebration Page Generator">
          <div class="absolute top-3 right-3">
            <svg class="w-5 h-5 text-yellow-400 drop-shadow-lg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2l3 7h7l-5.5 4 2 7-6-4-6 4 2-7L2 9h7l3-7z"/>
            </svg>
          </div>
          <div class="flex flex-col h-full justify-between">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-xl bg-white/90 flex items-center justify-center shadow-md">
               <svg class="w-7 h-7 text-sky-500" viewBox="0 0 24 24" fill="none">
                  <rect x="3" y="8" width="18" height="13" rx="2" ry="2" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M12 8v13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                  <path d="M3 14h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                  <path d="M12 3c1.5 1 3 3 0 5-3-2-1.5-4-0-5z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div>
                <h4 class="font-bold text-lg text-gray-900">WishCraft</h4>
                <p class="text-sm text-gray-600">Create beautiful celebration pages in seconds.</p>
              </div>
            </div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-sm text-sky-600 font-bold flex items-center gap-1">
                Launch Tool
                <svg class="w-4 h-4 transform transition-transform duration-300 group-hover:translate-x-1" viewBox="0 0 24 24" fill="none">
                  <path d="M5 12h14m-7-7l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="text-xs text-gray-400">The Best ✨</div>
            </div>
          </div>
        </a>

         <!-- StudyMate -->
        <a href="https://yash-verma2.github.io/studymate-site/" 
           class="tool-card glass p-5 rounded-2xl border border-gray-200 group hover:shadow-lg transition-all" 
           data-search="StudyMate MCQ Generator Notes Summaries AI Chatbot education study tool" 
           data-category="education" aria-label="StudyMate - AI Education Tool">
          <div class="flex flex-col h-full justify-between">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-xl bg-white/80 flex items-center justify-center shadow-sm">
                <svg class="w-7 h-7 text-sky-600" viewBox="0 0 24 24" fill="none">
                  <rect x="4" y="3" width="16" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M12 3v6l4-2v12H8V7l4-2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div>
                <h4 class="font-bold text-lg text-gray-900">StudyMate</h4>
                <p class="text-sm text-gray-600">Generate MCQs, summaries, notes & chat with AI.</p>
              </div>
            </div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-sm text-sky-600 font-bold flex items-center gap-1">
                Launch Tool
                <svg class="w-4 h-4 transform transition-transform duration-300 group-hover:translate-x-1" viewBox="0 0 24 24" fill="none">
                  <path d="M5 12h14m-7-7l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="text-xs text-gray-400">AI Powered</div>
            </div>
          </div>
        </a>

        <!-- Meme Maker -->
        <a href="tools/meme.html" class="tool-card glass p-5 rounded-2xl border border-gray-200 group" 
           data-search="Meme Maker Create social-ready memes image editor text stickers download PNG fun tool" 
           data-category="fun" aria-label="Meme Maker - Social Image Creator">
          <div class="flex flex-col h-full justify-between">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-lg bg-white/80 flex items-center justify-center shadow-sm">
                <svg class="w-6 h-6 text-amber-500" viewBox="0 0 24 24" fill="none"><path d="M21 15v4a1 1 0 0 1-1 1H9l-4 2V5a1 1 0 0 1 1-1h12" stroke="currentColor" stroke-width="1.2"/></svg>
              </div>
              <div>
                <h4 class="font-bold text-lg">Meme Maker</h4>
                <p class="text-sm text-gray-600">Create shareable images & memes quickly.</p>
              </div>
            </div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-sm text-amber-500 font-bold">Launch Tool</div>
              <div class="text-xs text-gray-400">Share</div>
            </div>
          </div>
        </a>

        <!-- PDF Utilities -->
        <a href="tools/pdf.html" class="tool-card glass p-5 rounded-2xl border border-gray-200 group" 
           data-search="PDF Utilities Merge PDFs compress images convert images to PDF offline pdf tool" 
           data-category="pdf" aria-label="PDF Utilities - Merge, Convert, and Compress PDFs">
          <div class="flex flex-col h-full justify-between">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-lg bg-white/80 flex items-center justify-center shadow-sm">
                <svg class="w-6 h-6 text-emerald-600" viewBox="0 0 24 24" fill="none"><path d="M7 7h10v10H7z" stroke="currentColor" stroke-width="1.2"/></svg>
              </div>
              <div>
                <h4 class="font-bold text-lg">PDF Utilities</h4>
                <p class="text-sm text-gray-600">Merge, convert, and edit PDFs offline.</p>
              </div>
            </div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-sm text-emerald-600 font-bold">Launch Tool</div>
              <div class="text-xs text-gray-400">Secure</div>
            </div>
          </div>
        </a>

        <!-- Placeholder & CTA -->
        <div class="tool-card p-6 rounded-2xl border border-dashed border-gray-300 flex flex-col justify-center items-center text-center">
          <h4 class="font-bold text-lg text-gray-700">More Tools On The Way...</h4>
          <p class="text-sm text-gray-500 mt-2">Image Compressor, Voice Editor, and more.</p>
        </div>

        <div class="tool-card p-6 rounded-2xl flex items-center justify-center border border-dashed border-sky-200">
          <a href="https://ig.me/m/yash_verma_690" target="_blank" class="px-4 py-2 bg-sky-600 text-white rounded-xl">Request a Feature</a>
        </div>
      </div>
    </section>

    <!-- DEBUG STATUS SECTION -->
    <div class="max-w-6xl mx-auto px-4 mb-10">
        <h3 class="font-bold text-red-600">System Status (Debug Mode)</h3>
        <div id="debug-status">Initializing...</div>
    </div>

    <!-- Contact CTA -->
    <section id="contact" class="py-12 bg-gray-900 rounded-2xl mb-10 text-white scroll-fade-in">
      <div class="max-w-4xl mx-auto text-center px-6">
        <h3 class="text-2xl md:text-3xl font-extrabold">Your Next Project Starts Here.</h3>
        <p class="mt-3 text-gray-300">We're ready to integrate custom solutions or discuss your needs.</p>
        <div class="mt-8 flex flex-col sm:flex-row justify-center gap-4">
          <a href="https://ig.me/m/yash_verma_690" class="px-6 py-3 bg-emerald-400 text-gray-900 rounded-xl">Contact Devloper</a>
          <a href="about.html" class="px-6 py-3 border-2 border-gray-500 rounded-xl">See Documentation</a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 text-sm text-gray-600">
      <div class="max-w-6xl mx-auto px-4 sm:px-6">
        <div class="flex flex-col md:flex-row items-center justify-between gap-6">
          <div class="flex items-center gap-4">
            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-sky-600 to-emerald-400 flex items-center justify-center text-white">
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none"><path d="M3 12h18M12 3v18" stroke="white" stroke-width="2"/></svg>
            </div>
            <div>
              <div class="font-bold">ToolNest</div>
              <div class="text-xs text-gray-500">Immersive Utility Hub</div>
            </div>
          </div>
          <div class="flex items-center gap-6">
            <div class="hidden md:flex gap-4">
              <a class="hover:underline" href="#trust">Why Trust Us</a>
              <a class="hover:underline" href="#tools">Tools</a>
              <a class="hover:underline" href="about.html">About</a>
            </div>
            <div class="flex items-center gap-3">
              <a href="#" class="p-2 rounded-xl border border-gray-300 dark:border-gray-700 backdrop-blur bg-white/30 dark:bg-white/10 hover:bg-white/50 dark:hover:bg-white/20 transition" aria-label="Instagram">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <rect x="3" y="3" width="18" height="18" rx="5" />
                  <circle cx="12" cy="12" r="4" />
                  <circle cx="17" cy="7" r="1.2" fill="currentColor" />
                </svg>
              </a>
            </div>
          </div>
        </div>
        <div class="mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500">
          &copy; <span id="currentYear"></span> ToolNest — Designed by Yash Verma. All Rights Reserved.
        </div>
      </div>
    </footer>

  </main>

  <!-- Scroll To Top -->
  <button id="scrollToTopBtn" class="fixed z-40 p-3 bg-sky-600 text-white rounded-full shadow-xl hover:bg-sky-700 focus:outline-none" aria-label="Scroll to top">
    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none"><path d="M5 10l7-7m0 0l7 7m-7-7v18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </button>

  <script>
    // ====== Initialization & element refs ======
    const mobileMenu = document.getElementById('mobileMenu');
    const menuBtn = document.getElementById('menuBtn');
    const closeMenuBtn = document.getElementById('closeMenuBtn');
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
    const catDropdownBtn = document.getElementById('catDropdownBtn');
    const catDropdown = document.getElementById('catDropdown');
    const openCategoriesDesktop = document.getElementById('openCategoriesDesktop');
    const categoryModal = document.getElementById('categoryModal');
    const closeCategoryModal = document.getElementById('closeCategoryModal');
    const allCategoriesList = document.getElementById('allCategoriesList');
    const toolsGrid = document.getElementById('toolsGrid');
    const toolCards = Array.from(document.querySelectorAll('#toolsGrid > *'));
    const toolCountEl = document.getElementById('toolCount');
    const scrollToTopBtn = document.getElementById('scrollToTopBtn');
    const themeToggle = document.getElementById('themeToggle');
    const htmlEl = document.documentElement;
    const THEME_KEY = 'toolnest-theme';

    // ====== Theme: default LIGHT, toggle persists ======
    function applyTheme(theme) {
      if (theme === 'dark') {
        htmlEl.classList.add('dark');
        themeToggle.setAttribute('aria-pressed', 'true');
      } else {
        htmlEl.classList.remove('dark');
        themeToggle.setAttribute('aria-pressed', 'false');
      }
      localStorage.setItem(THEME_KEY, theme);
    }
    (function initTheme(){
      const saved = localStorage.getItem(THEME_KEY);
      if (saved) applyTheme(saved);
      else applyTheme('light'); // default light (per request)
    })();
    themeToggle?.addEventListener('click', () => applyTheme(htmlEl.classList.contains('dark') ? 'light' : 'dark'));

    // ====== Mobile menu toggle ======
    function toggleMenu() {
      mobileMenu.classList.toggle('translate-x-full');
      const open = !mobileMenu.classList.contains('translate-x-full');
      mobileMenu.setAttribute('aria-hidden', String(!open));
      document.body.style.overflow = open ? 'hidden' : '';
    }
    menuBtn?.addEventListener('click', toggleMenu);
    closeMenuBtn?.addEventListener('click', toggleMenu);
    mobileNavLinks.forEach(l => l.addEventListener('click', () => { if (!mobileMenu.classList.contains('translate-x-full')) toggleMenu(); }));

    // ====== Category dropdown (mobile) ======
    catDropdownBtn?.addEventListener('click', () => catDropdown.classList.toggle('hidden'));
    catDropdown?.querySelectorAll('button')?.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const category = e.currentTarget.dataset.category;
        filterCategory(category);
        catDropdown.classList.add('hidden');
      });
    });

    // ====== Desktop modal open/close & populate categories ======
    const allCats = ['all','qr','image','pdf','background','fun','WishCraft', 'education']; // Added 'education'
    function populateCategoryModal(){
      allCategoriesList.innerHTML = allCats.map(c => `<div class="p-3 rounded-xl bg-white/50 dark:bg-white/5 text-center cursor-pointer">${c.toUpperCase().replace('WISHCRAFT', 'GENERATORS').replace('EDUCATION', 'AI/EDUCATION')}</div>`).join('');
      // add click handlers
      Array.from(allCategoriesList.children).forEach((el, idx) => {
        el.addEventListener('click', () => {
          filterCategory(allCats[idx]);
          categoryModal.classList.remove('show');
          categoryModal.classList.add('hidden');
        });
      });
    }
    openCategoriesDesktop?.addEventListener('click', () => { populateCategoryModal(); categoryModal.classList.remove('hidden'); categoryModal.classList.add('show'); });
    closeCategoryModal?.addEventListener('click', () => { categoryModal.classList.remove('show'); categoryModal.classList.add('hidden'); });
    categoryModal?.addEventListener('click', e => { if (e.target === categoryModal) { categoryModal.classList.remove('show'); categoryModal.classList.add('hidden'); } });

    // ====== Search filter ======
    window.filterTools = function(query){
      const q = (query || '').toLowerCase().trim();
      const has = q.length > 0;
      document.querySelectorAll('#toolsGrid > *').forEach(card => {
        const search = (card.getAttribute('data-search') || '').toLowerCase();
        const show = !has || search.includes(q);
        card.style.display = show ? 'block' : 'none';
      });
    };

    // ====== Category filter ======
    window.filterCategory = function(cat) {
      document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.cat-btn').forEach(b => { if (b.dataset.cat === cat) b.classList.add('active'); });
      document.querySelectorAll('#toolsGrid > *').forEach(card => {
        const c = card.dataset.category || 'all';
        card.style.display = (cat === 'all' || cat === c) ? 'block' : 'none';
      });
    };

    // ====== Update tool count ======
    function updateToolCount(){
      const liveTools = Array.from(document.querySelectorAll('#toolsGrid > *')).filter(c => c.getAttribute('data-search'));
      toolCountEl.textContent = liveTools.length;
    }
    updateToolCount();

    // ====== Scroll features (fade-in & top button) ======
    function initScrollFeatures(){
      const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) { entry.target.classList.add('is-visible'); obs.unobserve(entry.target); }
        });
      }, { threshold: 0.08 });
      document.querySelectorAll('.scroll-fade-in').forEach(s => observer.observe(s));

      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) scrollToTopBtn.classList.add('visible');
        else scrollToTopBtn.classList.remove('visible');
      });
      scrollToTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    }

    // ====== Desktop tilt effect (lightweight) ======
    function initTiltEffect(){
      if (window.innerWidth < 768) return;
      const grid = document.getElementById('toolsGrid');
      grid?.addEventListener('mousemove', (e) => {
        const card = e.target.closest('.tool-card');
        toolCards.forEach(c => { if (c !== card) { const cont = c.querySelector('.tool-content'); if (cont) cont.style.transform = 'none'; }});
        if (!card) return;
        const rect = card.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        const x = e.clientX - centerX;
        const y = e.clientY - centerY;
        const rotateX = (y / rect.height) * -6;
        const rotateY = (x / rect.width) * 6;
        const content = card.querySelector('.tool-content');
        if (content) content.style.transform = `perspective(800px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
      });
      grid?.addEventListener('mouseleave', () => {
        toolCards.forEach(card => { const content = card.querySelector('.tool-content'); if (content) content.style.transform = 'none'; });
      });
    }

    // ====== Init on load ======
    window.addEventListener('load', () => {
      initScrollFeatures();
      initTiltEffect();
      // small accessible touches
      document.getElementById('currentYear').textContent = new Date().getFullYear();
    });

    // small safeguard: ensure mobile menu translated state is set
    if (mobileMenu && !mobileMenu.classList.contains('translate-x-full')) mobileMenu.classList.add('translate-x-full');

    // ensure toolCount on DOM changes (if you dynamically add tools later)
    const gridObserver = new MutationObserver(() => updateToolCount());
    gridObserver.observe(toolsGrid, {childList:true, subtree:false});
  </script>

  <script>
    // --- DEBUGGING & PWA INSTALLATION LOGIC ---
    const debugBox = document.getElementById('debug-status');
    function log(msg) {
      console.log(msg);
      debugBox.textContent += msg + '\n';
    }

    log('Starting System Check...');

    // 1. Check Secure Context (Required for PWA)
    if (!window.isSecureContext) {
      log('ERROR: Site is NOT in a secure context (HTTPS or localhost). PWA will not work.');
    } else {
      log('OK: Secure context detected.');
    }

    let deferredPrompt;

    // 2. Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        // Ensure the path is correct
        navigator.serviceWorker.register('./sw.js') 
          .then(reg => {
             log('OK: Service Worker Registered. Scope: ' + reg.scope);
             // Force update if available
             if (reg.waiting) {
               log('INFO: New SW waiting. Updating...');
               reg.waiting.postMessage({ type: 'SKIP_WAITING' });
             }
          })
          .catch(err => {
            log('ERROR: Service Worker Failed to Register. ' + err);
          });
      });
    } else {
      log('ERROR: Browser does not support Service Workers.');
    }

    // 3. Handle Install Prompt
    window.addEventListener('beforeinstallprompt', (e) => {
      log('SUCCESS: beforeinstallprompt fired! App is installable.');
      e.preventDefault();
      deferredPrompt = e;

      // Show the buttons
      const btnDesktop = document.getElementById('installBtn');
      const btnMobile = document.getElementById('installBtnMobile');
      
      if(btnDesktop) {
        btnDesktop.style.display = 'block';
        btnDesktop.addEventListener('click', installApp);
      }
      if(btnMobile) {
        btnMobile.classList.remove('hidden');
        btnMobile.addEventListener('click', installApp);
      }
    });

    window.addEventListener('appinstalled', () => {
      log('SUCCESS: App was installed successfully.');
      // Optionally hide the button after install
      document.getElementById('installBtn').style.display = 'none';
      document.getElementById('installBtnMobile').classList.add('hidden');
    });

    function installApp() {
      if (!deferredPrompt) return;
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then(choice => {
        log('User choice: ' + choice.outcome);
        // Prompt is only valid once
        deferredPrompt = null;
        // The 'appinstalled' event handles hiding the buttons if successful
      });
    }
  </script>
</body>
</html>